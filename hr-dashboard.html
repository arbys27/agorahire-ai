<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AgoraHire AI - HR Dashboard</title>
  <link rel="stylesheet" href="css/styles.css" />
  <style>
    .modal-backdrop { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); z-index: 999; align-items: center; justify-content: center; padding:20px; }
    .modal-backdrop.show { display: flex; }
    .modal { background: #0f172a; border: 1px solid rgba(56,189,248,0.4); border-radius: 16px; width: 100%; max-width: 820px; max-height: 92vh; overflow-y: auto; box-shadow: 0 25px 70px rgba(0,0,0,0.8); }
    .modal-header { padding: 20px 24px; border-bottom: 1px solid rgba(56,189,248,0.2); display: flex; justify-content: space-between; align-items: center; }
    .modal-title { font-size: 21px; color: #38bdf8; font-weight: 600; }
    .modal-body { padding: 24px; }
    .score-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 16px; margin: 24px 0; }
    .score-item { background: rgba(56,189,248,0.12); padding: 18px; border-radius: 14px; text-align: center; border: 1px solid rgba(56,189,248,0.2); }
    .score-item div:first-child { font-size: 28px; font-weight: bold; margin-bottom: 8px; }
    .transcript { background: #1e293b; padding: 18px; border-radius: 12px; max-height: 340px; overflow-y: auto; font-size: 14.5px; line-height: 1.85; border: 1px solid rgba(56,189,248,0.2); }
    .badge { padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; color: white; }
    .badge-pass { background: #22c55e; }
    .badge-fail { background: #ef4444; }
    .badge-pending { background: #f59e0b; }
    select { background: #1e293b; border: 1px solid rgba(56,189,248,0.4); color: white; padding: 10px 14px; border-radius: 10px; }
  </style>
</head>
<body>
  <header class="nav">
    <div class="nav-inner">
      <div class="nav-left">
        <div class="logo-badge">A</div>
        <div>
          <div class="nav-title">AgoraHire AI</div>
          <div class="nav-sub">HR Panel · Real-time AI Screening Results</div>
        </div>
      </div>
      <button class="btn btn-ghost" onclick="window.location.href='index.html'">Back to Applicant View</button>
    </div>
  </header>

  <main class="shell">
    <div class="hr-layout">
      <aside class="hr-sidebar">
        <h3>HR Control Panel</h3>
        <p class="helper">Review AI-screened applicants and manage interviews.</p>
        <div class="hr-menu">
          <div class="hr-menu-item active">Dashboard</div>
          <div class="hr-menu-item">Jobs handled <span>3</span></div>
          <div class="hr-menu-item">AI interviews <span style="color:#22c55e;">Live</span></div>
        </div>
      </aside>

      <section class="hr-main">
        <div class="hr-main-header">
          <div>
            <div class="card-title">Applicants Overview</div>
            <div class="card-subtitle">Synced via Agora RTM in real-time</div>
          </div>
          <div class="filters">
            <select id="filterJob">
              <option value="">All jobs</option>
              <option>Customer Support Associate</option>
              <option>HR Operations Intern</option>
              <option>Cloud Support Engineer</option>
            </select>
            <select id="filterStatus">
              <option value="">All statuses</option>
              <option>Passed AI</option>
              <option>AI Pending</option>
              <option>Failed AI</option>
            </select>
          </div>
        </div>

        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>ID</th><th>Name</th><th>Job</th><th>AI Score</th><th>Status</th><th>Action</th>
              </tr>
            </thead>
            <tbody id="applicantTable">
              <tr data-job="Customer Support Associate" data-status="Passed AI">
                <td>APP-001</td>
                <td>Juan Dela Cruz</td>
                <td>Customer Support Associate</td>
                <td><strong>82 / 100</strong></td>
                <td><span class="badge badge-pass">Passed AI</span></td>
                <td>
                  <button class="btn btn-ghost btn-sm" onclick="viewApplicant(this)">View</button>
                  <button class="btn btn-primary btn-sm" onclick="scheduleInterview(this)">Schedule</button>
                </td>
              </tr>
              <tr data-job="HR Operations Intern" data-status="AI Pending">
                <td>APP-002</td>
                <td>Maria Santos</td>
                <td>HR Operations Intern</td>
                <td><strong>69 / 100</strong></td>
                <td><span class="badge badge-pending">AI Pending</span></td>
                <td><button class="btn btn-ghost btn-sm" disabled>Awaiting AI</button></td>
              </tr>
              <tr data-job="Cloud Support Engineer" data-status="Failed AI">
                <td>APP-003</td>
                <td>Mark Reyes</td>
                <td>Cloud Support Engineer</td>
                <td><strong>54 / 100</strong></td>
                <td><span class="badge badge-fail">Failed AI</span></td>
                <td><button class="btn btn-ghost btn-sm" onclick="viewApplicant(this)">View</button></td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </div>
  </main>

  <div id="modalBackdrop" class="modal-backdrop"></div>

  <script>
    const tableRows = document.querySelectorAll("#applicantTable tr");
    const filterJob = document.getElementById("filterJob");
    const filterStatus = document.getElementById("filterStatus");

    function filterTable() {
      const job = filterJob.value;
      const status = filterStatus.value;

      tableRows.forEach(row => {
        const rowJob = row.dataset.job;
        const rowStatus = row.dataset.status;

        const matchJob = !job || rowJob === job;
        const matchStatus = !status || rowStatus === status;

        if (matchJob && matchStatus) {
          row.style.display = "";
        } else {
          row.style.display = "none";
        }
      });
    }

    // Attach filters
    filterJob.addEventListener("change", filterTable);
    filterStatus.addEventListener("change", filterTable);

    // Modal Functions
    function viewApplicant(btn) {
      const row = btn.closest("tr");
      const cells = row.children;
      const name = cells[1].textContent;
      const job = cells[2].textContent;
      const score = cells[3].textContent.trim().split(" ")[0];

      document.getElementById("modalBackdrop").innerHTML = `
        <div class="modal">
          <div class="modal-header">
            <div class="modal-title">Applicant Details · ${cells[0].textContent}</div>
            <button class="btn btn-ghost" onclick="closeModal()">×</button>
          </div>
          <div class="modal-body">
            <h3>${name}</h3>
            <p><strong>Applied for:</strong> ${job}</p>
            <p><strong>AI Score:</strong> <strong style="color:#38bdf8; font-size:20px;">${score}/100</strong> · ${cells[4].querySelector(".badge").textContent}</p>

            <div class="score-grid">
              <div class="score-item"><div style="color:#22c55e;">88</div><div>Communication</div></div>
              <div class="score-item"><div style="color:#38bdf8;">79</div><div>Technical Fit</div></div>
              <div class="score-item"><div style="color:#f59e0b;">75</div><div>Experience</div></div>
              <div class="score-item"><div style="color:#a78bfa;">90</div><div>Cultural Fit</div></div>
            </div>

            <h4 style="margin:20px 0 10px; color:#38bdf8;">AI Interview Transcript</h4>
            <div class="transcript">
              <p><strong>AI:</strong> Can you describe your experience with customer support tools?</p>
              <p><strong>${name.split(" ")[0]}:</strong> Yes, I have 3 years using Zendesk, Freshdesk and Intercom...</p>
              <p><strong>AI:</strong> How do you handle difficult customers?</p>
              <p><strong>${name.split(" ")[0]}:</strong> I use empathy first, then active listening and offer solutions...</p>
              <p style="color:#22c55e; margin-top:16px;"><strong>AI Verdict:</strong> Strong communication skills detected. Recommended.</p>
            </div>

            <div style="margin-top:28px; text-align:right;">
              <button class="btn btn-primary" onclick="closeModal()">Close</button>
            </div>
          </div>
        </div>
      `;
      document.getElementById("modalBackdrop").classList.add("show");
    }

    function scheduleInterview(btn) {
      const row = btn.closest("tr");
      const name = row.children[1].textContent;

      document.getElementById("modalBackdrop").innerHTML = `
        <div class="modal" style="max-width:520px;">
          <div class="modal-header">
            <div class="modal-title">Schedule Interview</div>
            <button class="btn btn-ghost" onclick="closeModal()">×</button>
          </div>
          <div class="modal-body">
            <h3>${name}</h3>
            <p>Schedule final human interview</p>
            <div class="form-group" style="margin:20px 0;">
              <label>Date & Time</label>
              <input type="datetime-local" style="width:100%; padding:12px; border-radius:8px; border:1px solid #38bdf8; background:#1e293b; color:white;" />
            </div>
            <div class="form-group">
              <label>Interviewer</label>
              <select style="width:100%; padding:12px; border-radius:8px; border:1px solid #38bdf8; background:#1e293b; color:white;">
                <option>Hannah Lim (Hiring Manager)</option>
                <option>Robert Tan (Team Lead)</option>
                <option>Michael Chen (Director)</option>
              </select>
            </div>
            <div style="margin-top:28px; text-align:right; display:flex; gap:12px; justify-content:flex-end;">
              <button class="btn btn-ghost" onclick="closeModal()">Cancel</button>
              <button class="btn btn-primary" onclick="alert('Interview scheduled for ${name}!'); closeModal();">
                Confirm Schedule
              </button>
            </div>
          </div>
        </div>
      `;
      document.getElementById("modalBackdrop").classList.add("show");
    }

    function closeModal() {
      document.getElementById("modalBackdrop").classList.remove("show");
      setTimeout(() => document.getElementById("modalBackdrop").innerHTML = "", 300);
    }

    document.getElementById("modalBackdrop").addEventListener("click", (e) => {
      if (e.target === document.getElementById("modalBackdrop")) closeModal();
    });
  </script>
</body>
</html>