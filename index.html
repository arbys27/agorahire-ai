<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AgoraHire AI - Apply Now</title>
  <link rel="stylesheet" href="css/styles.css" />
  <style>
    /* Search box styling */
    .search-box {
      position: relative;
      margin-bottom: 14px;
    }
    .search-input {
      width: 100%;
      padding: 10px 40px 10px 14px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text);
      font-size: 13px;
      outline: none;
      transition: 0.16s ease;
    }
    .search-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
    }
    .search-input::placeholder {
      color: var(--text-soft);
    }
    .search-icon {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-soft);
      pointer-events: none;
    }
    .no-results {
      text-align: center;
      padding: 32px 20px;
      color: var(--text-soft);
      font-size: 14px;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.5);
      border: 1px dashed var(--border);
    }
    .no-results svg {
      margin-bottom: 12px;
      opacity: 0.5;
    }
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <header class="nav">
    <div class="nav-inner">
      <div class="nav-left">
        <div class="logo-badge">A</div>
        <div>
          <div class="nav-title">AgoraHire AI</div>
          <div class="nav-sub">AI Voice Pre-Screening · Powered by Agora + AWS</div>
        </div>
      </div>
    </div>
  </header>

  <main class="shell">
    <!-- HERO -->
    <section class="hero">
      <div class="hero-text">
        <h1>Build your <span>AI HR Interviewer</span><br>with Agora real-time voice.</h1>
        <p>This demo portal automates the first-round HR screening using an AI voice agent over Agora RTC.</p>
        <div class="hero-chips">
          <div class="chip">B2B hiring automation</div>
          <div class="chip">Agora RTC · RTM</div>
          <div class="chip">AWS + JSON storage</div>
          <div class="chip">Data privacy aware</div>
        </div>
        <div class="hero-badges">
          <span>AI Voice Agent online</span>
          <span>Pre-screening time saved: ~60%</span>
        </div>
      </div>
      <div class="hero-panel">
        <div class="hero-panel-header">
          <span>AI Interview Call Preview</span>
          <span class="status-pill">Real-time · AgoraRTC</span>
        </div>
        <div class="fake-call">
          <div class="fake-avatar">AI</div>
          <div class="fake-call-main">
            <div class="title">AI Recruiter · Voice</div>
            <div class="subtitle">"Tell me about your most recent role and key responsibilities."</div>
            <div class="fake-call-badges">
              <span>STT + LLM Scoring</span>
              <span>HR rubric based</span>
              <span>Pass / Fail only</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- APPLICANT LAYOUT -->
    <section class="applicant-layout">
      <!-- JOB LIST WITH SEARCH -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">Open Positions</div>
          <div class="card-subtitle">Search and choose a role to start your AI pre-interview.</div>
        </div>
        
        <!-- SEARCH BOX -->
        <div class="search-box">
          <input 
            type="text" 
            id="jobSearchInput" 
            class="search-input" 
            placeholder="Search by job title, department, or keywords..."
          />
          <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
        </div>

        <!-- JOB LIST -->
        <div class="job-list" id="jobList">
          <div class="job-card" data-job="Customer Support Associate" data-department="Customer Experience" data-level="Entry-Mid" data-tags="Hybrid,B2B SaaS">
            <div class="job-title">Customer Support Associate</div>
            <div class="job-meta">Customer Experience · Entry-Mid</div>
            <div class="job-tags">
              <span class="job-tag">Hybrid</span>
              <span class="job-tag">B2B SaaS</span>
            </div>
          </div>
          <div class="job-card" data-job="HR Operations Intern" data-department="People & Culture" data-level="Internship" data-tags="Onsite,Fresh grads">
            <div class="job-title">HR Operations Intern</div>
            <div class="job-meta">People & Culture · Internship</div>
            <div class="job-tags">
              <span class="job-tag">Onsite</span>
              <span class="job-tag">Fresh grads</span>
            </div>
          </div>
          <div class="job-card" data-job="Cloud Support Engineer" data-department="Engineering" data-level="Mid-Senior" data-tags="Remote,AWS · Kubernetes">
            <div class="job-title">Cloud Support Engineer</div>
            <div class="job-meta">Engineering · Mid-Senior</div>
            <div class="job-tags">
              <span class="job-tag">Remote</span>
              <span class="job-tag">AWS · Kubernetes</span>
            </div>
          </div>
        </div>

        <!-- NO RESULTS MESSAGE -->
        <div id="noResultsMessage" class="no-results" style="display: none;">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
            <line x1="8" y1="11" x2="14" y2="11"/>
          </svg>
          <div><strong>No jobs found</strong></div>
          <div style="margin-top: 6px; font-size: 12px;">Try adjusting your search terms</div>
        </div>
      </div>

      <!-- APPLICATION FORM -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">Application Form</div>
          <div class="card-subtitle">Selected role: <span id="selected-role-label">None</span></div>
        </div>
        <form id="application-form">
          <input type="hidden" name="jobRole" id="jobRole" />
          <div class="form-group">
            <label for="fullName">Full name</label>
            <input id="fullName" type="text" required placeholder="Juan Dela Cruz" />
          </div>
          <div class="form-row">
            <div class="form-group" style="flex:1">
              <label for="email">Email</label>
              <input id="email" type="email" required placeholder="you@example.com" />
            </div>
            <div class="form-group" style="flex:1">
              <label for="phone">Phone number</label>
              <input id="phone" type="tel" required placeholder="+63 9xx xxx xxxx" />
              <div class="helper">Include country code for AI call.</div>
            </div>
          </div>
          <div class="form-group">
            <label for="resume">Resume (PDF / DOC)</label>
            <input id="resume" type="file" accept=".pdf,.doc,.docx" />
            <div class="helper">For demo, file is not uploaded but shown in JSON.</div>
          </div>
          <div class="form-group">
            <label for="coverLetter">Cover letter</label>
            <textarea id="coverLetter" placeholder="Briefly share why you're a fit..."></textarea>
          </div>
          
          <div class="form-group">
            <div class="inline-group">
              <input type="checkbox" id="consent" required>
              <label for="consent">I agree to data privacy terms and AI screening</label>
            </div>
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-ghost" id="clearBtn">Clear form</button>
            <button type="submit" class="btn btn-primary">Submit & start AI call</button>
          </div>
          <div id="statusBanner" class="status-banner status-info">Submitting application and preparing AI call…</div>
        </form>
      </div>
    </section>
  </main>

  <!-- ADMIN ACCESS BUTTON -->
  <div id="adminAccessBtn" class="admin-icon-btn" title="HR Login">
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="1.8"/>
      <path d="M4 20C4 16.6863 7.58172 14 12 14C16.4183 14 20 16.6863 20 20" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
    </svg>
  </div>

  <!-- MODAL BACKDROP -->
  <div id="modalBackdrop" class="modal-backdrop"></div>

  <script src="js/script.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const selectedRoleLabel = document.getElementById("selected-role-label");
      const jobRoleInput = document.getElementById("jobRole");
      const statusBanner = document.getElementById("statusBanner");
      const form = document.getElementById("application-form");
      const clearBtn = document.getElementById("clearBtn");
      const adminBtn = document.getElementById("adminAccessBtn");
      const modalBackdrop = document.getElementById("modalBackdrop");
      const jobSearchInput = document.getElementById("jobSearchInput");
      const jobList = document.getElementById("jobList");
      const noResultsMessage = document.getElementById("noResultsMessage");

      // === JOB SEARCH FUNCTIONALITY ===
      jobSearchInput.addEventListener("input", (e) => {
        const searchTerm = e.target.value.toLowerCase().trim();
        const jobCards = document.querySelectorAll(".job-card");
        let hasVisibleResults = false;

        jobCards.forEach(card => {
          const jobTitle = card.dataset.job.toLowerCase();
          const department = card.dataset.department.toLowerCase();
          const level = card.dataset.level.toLowerCase();
          const tags = card.dataset.tags.toLowerCase();

          // Check if search term matches any field
          const matches = jobTitle.includes(searchTerm) ||
                         department.includes(searchTerm) ||
                         level.includes(searchTerm) ||
                         tags.includes(searchTerm);

          if (matches) {
            card.style.display = "flex";
            hasVisibleResults = true;
          } else {
            card.style.display = "none";
          }
        });

        // Show/hide no results message
        if (hasVisibleResults || searchTerm === "") {
          noResultsMessage.style.display = "none";
          jobList.style.display = "flex";
        } else {
          noResultsMessage.style.display = "block";
          jobList.style.display = "none";
        }
      });

      // === JOB SELECTION ===
      document.querySelectorAll(".job-card").forEach(card => {
        card.addEventListener("click", () => {
          const role = card.dataset.job;
          selectedRoleLabel.textContent = role;
          jobRoleInput.value = role;

          // Visual feedback
          document.querySelectorAll(".job-card").forEach(c => {
            c.style.borderColor = "";
            c.style.boxShadow = "";
          });
          card.style.borderColor = "#38bdf8";
          card.style.boxShadow = "0 0 20px rgba(56,189,248,0.4)";
        });
      });

      // === CLEAR FORM ===
      clearBtn?.addEventListener("click", () => {
        form.reset();
        selectedRoleLabel.textContent = "None";
        jobRoleInput.value = "";
        document.querySelectorAll(".job-card").forEach(c => {
          c.style.borderColor = "";
          c.style.boxShadow = "";
        });
        statusBanner.classList.remove("show", "status-success");
      });

      // === FORM SUBMIT → GO TO AI INTERVIEW ROOM ===
      form.addEventListener("submit", (e) => {
        e.preventDefault();

        // Basic validation
        if (!jobRoleInput.value) {
          alert("Please select a job position first.");
          return;
        }
        if (!document.getElementById("consent").checked) {
          alert("You must agree to the terms and AI screening.");
          return;
        }

        // Show connecting message
        statusBanner.textContent = "Application received! Connecting you to AI Interviewer...";
        statusBanner.classList.add("show");
        statusBanner.classList.remove("status-success");

        // Fake delay for realism
        setTimeout(() => {
          // Save applicant data temporarily (for demo feel)
          const applicant = {
            name: document.getElementById("fullName").value || "Candidate",
            role: jobRoleInput.value,
            email: document.getElementById("email").value,
            phone: document.getElementById("phone").value
          };
          sessionStorage.setItem("currentApplicant", JSON.stringify(applicant));

          // Redirect to AI Interview Room
          window.location.href = "interview-room.html";
        }, 2200);
      });

      // === ADMIN BUTTON → HR LOGIN MODAL ===
      adminBtn.addEventListener("click", () => {
        modalBackdrop.innerHTML = `
          <div class="modal">
            <div class="modal-header">
              <div class="modal-title">HR Login</div>
              <button class="btn btn-ghost" id="closeModal">×</button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <p style="text-align:center; margin:16px 0; color:#94a3b8;">
                  Demo credentials:<br><strong>admin@demo.com</strong> / <strong>123456</strong>
                </p>
                <div class="form-group">
                  <label>Email</label>
                  <input type="email" value="admin@demo.com" />
                </div>
                <div class="form-group">
                  <label>Password</label>
                  <input type="password" value="123456" />
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button class="btn btn-ghost" id="closeModal2">Cancel</button>
              <button class="btn btn-primary" id="loginBtn">Login to HR Panel</button>
            </div>
          </div>
        `;
        modalBackdrop.classList.add("show");

        document.querySelectorAll("#closeModal, #closeModal2").forEach(btn => {
          btn.addEventListener("click", () => modalBackdrop.classList.remove("show"));
        });

        document.getElementById("loginBtn").addEventListener("click", () => {
          window.location.href = "hr-dashboard.html";
        });
      });

      // Pulse animation for admin button
      setTimeout(() => {
        adminBtn.classList.add("pulse");
        setTimeout(() => adminBtn.classList.remove("pulse"), 3000);
      }, 800);
    });
  </script>
</body>
</html>